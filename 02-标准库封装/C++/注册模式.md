~~~C++

class Func {
    typedef void (*Caller)(void*);
    void* obj;
    Caller call;
public:
    Func(void* o, Caller c) : obj(o), call(c) {}
    void operator()() { call(obj); }
};

class LED {
public:
    void on()  { /*...*/ }
    void off() { /*...*/ }
    static void call_on(void* o)  { ((LED*)o)->on(); }
    static void call_off(void* o) { ((LED*)o)->off(); }
};

// 注册
Func led0_on(&led0, LED::call_on);
Func led0_off(&led0, LED::call_off);

~~~

