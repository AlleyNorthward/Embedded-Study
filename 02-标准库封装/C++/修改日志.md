@author 巷北  

@time 2025.10.23 18:47  

- 之前的设计模式,其实也没设计模式,都是走一步看一步,毕竟`C++`编写,没有参考示例,只能自己探索.

- 之前的编写,本身就是为自己这块板子写的,所以很多宏啊,函数内部逻辑啊,都很固定,只能在我这块板子上用.
- 可是抽象成类了之后,重载了很多函数,目的就是强调复用性.
- 随着代码的增多,我也愈发感到混乱:`C`文件跟`CPP`文件杂糅,专一性与复用性冲突,让我在调试,找问题的过程中,比较混乱.
- 所以首先整理了一下文件,分成两个板块,`C`编写板块和`C++`编写板块.
- `C++`板块内部做了分类,`APP`文件夹中的代码都是由`C++`编写的.
- 当然,上述只是在结构中进行修改,本质问题却根本无法改变,也就是设计模式,整体架构还是非常混乱的.
- 所以今下午想了很长时间的面向对象设计,根本问题出现在哪里.
- 最后得出结论,自己写的代码,主要还是面向自己的板子,不是通用代码,想强加复用性虽然不是不行,但终究会造成结构混乱.本质原因,是我做了区分:我的板子和其他板子.如果不做区分,而不是面向我的板子,事情就非常简单了.
- 所以我打算弱化我的板子的这种想法,而是强调一类板子的思想.而为了代码的已读性,我打算抽象一个中间类,`PeripheralMapping`类,将`typedef`自定义名称,跟对应宏进行绑定.
- 以前都是宏抽象,如今则使用映射绑定思想,内存占用会稍微增加,但是灵活性,可移至性也大大增加,复用性极强.